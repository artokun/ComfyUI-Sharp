{"id":"sharp-basic-workflow","revision":0,"last_node_id":25,"last_link_id":52,"nodes":[{"id":9,"type":"LoadSharpModel","pos":[-177.95877396853095,-1213.308620911364],"size":[270,82],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"device","name":"device","type":"COMBO","widget":{"name":"device"},"link":null},{"localized_name":"checkpoint_path","name":"checkpoint_path","shape":7,"type":"STRING","widget":{"name":"checkpoint_path"},"link":null}],"outputs":[{"localized_name":"model","name":"model","type":"SHARP_MODEL","links":[20]}],"properties":{"cnr_id":"comfyui-sharp","ver":"51939f0d3bdcd9f4965978445ad0fa31a6222ef0","Node name for S&R":"LoadSharpModel"},"widgets_values":["auto",""]},{"id":21,"type":"PreviewImage","pos":[1387.5905422433161,-1871.477198804017],"size":[636,398],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":38}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.12.2","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":20,"type":"PreviewImage","pos":[1394.930870035046,-2300.6935283639473],"size":[627.4232386014363,358.3867594737071],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":37}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.12.2","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":7,"type":"LoadImage","pos":[-910.0234950238612,-940.0676692572397],"size":[662.2282800153919,367.6329862374266],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[11]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.12.2","Node name for S&R":"LoadImage"},"widgets_values":["pano.png","image"]},{"id":11,"type":"SharpPredictDepth","pos":[167.9465603665549,-1182.3544511142193],"size":[181.1509765625,86],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"SHARP_MODEL","link":20},{"localized_name":"image","name":"image","type":"IMAGE","link":14},{"localized_name":"extrinsics","name":"extrinsics","shape":7,"type":"EXTRINSICS","link":18},{"localized_name":"intrinsics","name":"intrinsics","shape":7,"type":"INTRINSICS","link":19}],"outputs":[{"localized_name":"depth_maps","name":"depth_maps","type":"IMAGE","links":[25,46]},{"localized_name":"extrinsics","name":"extrinsics","type":"EXTRINSICS","links":[26,47]},{"localized_name":"intrinsics","name":"intrinsics","type":"INTRINSICS","links":[27,48]}],"properties":{"cnr_id":"comfyui-sharp","ver":"51939f0d3bdcd9f4965978445ad0fa31a6222ef0","Node name for S&R":"SharpPredictDepth"},"widgets_values":[]},{"id":19,"type":"ProjectDepthToPanorama","pos":[809.5589801635481,-1818.007378585998],"size":[277.4771484375,194],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"depth_maps","name":"depth_maps","type":"IMAGE","link":49},{"localized_name":"extrinsics","name":"extrinsics","type":"EXTRINSICS","link":50},{"localized_name":"intrinsics","name":"intrinsics","type":"INTRINSICS","link":51},{"localized_name":"panorama_width","name":"panorama_width","shape":7,"type":"INT","widget":{"name":"panorama_width"},"link":null},{"localized_name":"blend_mode","name":"blend_mode","shape":7,"type":"COMBO","widget":{"name":"blend_mode"},"link":null},{"localized_name":"show_borders","name":"show_borders","shape":7,"type":"BOOLEAN","widget":{"name":"show_borders"},"link":null},{"localized_name":"border_color","name":"border_color","shape":7,"type":"COMBO","widget":{"name":"border_color"},"link":null},{"localized_name":"disagreement_scale","name":"disagreement_scale","shape":7,"type":"FLOAT","widget":{"name":"disagreement_scale"},"link":null}],"outputs":[{"localized_name":"panoramic_depth","name":"panoramic_depth","type":"IMAGE","links":[37]},{"localized_name":"debug_overlay","name":"debug_overlay","type":"IMAGE","links":[38]},{"localized_name":"disagreement_heatmap","name":"disagreement_heatmap","type":"IMAGE","links":null}],"properties":{"cnr_id":"comfyui-sharp","ver":"51939f0d3bdcd9f4965978445ad0fa31a6222ef0","Node name for S&R":"ProjectDepthToPanorama"},"widgets_values":[2048,"none",true,"red",0.2]},{"id":24,"type":"AlignDepthMaps","pos":[383.48454847695496,-1605.533120374793],"size":[360.65,142],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"depth_maps","name":"depth_maps","type":"IMAGE","link":46},{"localized_name":"extrinsics","name":"extrinsics","type":"EXTRINSICS","link":47},{"localized_name":"intrinsics","name":"intrinsics","type":"INTRINSICS","link":48},{"localized_name":"method","name":"method","shape":7,"type":"COMBO","widget":{"name":"method"},"link":null},{"localized_name":"reference_view","name":"reference_view","shape":7,"type":"INT","widget":{"name":"reference_view"},"link":null}],"outputs":[{"localized_name":"aligned_depth_maps","name":"aligned_depth_maps","type":"IMAGE","links":[49]},{"localized_name":"extrinsics","name":"extrinsics","type":"EXTRINSICS","links":[50]},{"localized_name":"intrinsics","name":"intrinsics","type":"INTRINSICS","links":[51]},{"localized_name":"alignment_info","name":"alignment_info","type":"STRING","links":null}],"properties":{"cnr_id":"comfyui-sharp","ver":"51939f0d3bdcd9f4965978445ad0fa31a6222ef0","Node name for S&R":"AlignDepthMaps"},"widgets_values":["global_optimization",10]},{"id":16,"type":"ProjectDepthToPanorama","pos":[422.29970963740055,-1189.3127313610928],"size":[277.4771484375,194],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"depth_maps","name":"depth_maps","type":"IMAGE","link":25},{"localized_name":"extrinsics","name":"extrinsics","type":"EXTRINSICS","link":26},{"localized_name":"intrinsics","name":"intrinsics","type":"INTRINSICS","link":27},{"localized_name":"panorama_width","name":"panorama_width","shape":7,"type":"INT","widget":{"name":"panorama_width"},"link":null},{"localized_name":"blend_mode","name":"blend_mode","shape":7,"type":"COMBO","widget":{"name":"blend_mode"},"link":null},{"localized_name":"show_borders","name":"show_borders","shape":7,"type":"BOOLEAN","widget":{"name":"show_borders"},"link":null},{"localized_name":"border_color","name":"border_color","shape":7,"type":"COMBO","widget":{"name":"border_color"},"link":null},{"localized_name":"disagreement_scale","name":"disagreement_scale","shape":7,"type":"FLOAT","widget":{"name":"disagreement_scale"},"link":null}],"outputs":[{"localized_name":"panoramic_depth","name":"panoramic_depth","type":"IMAGE","links":[29]},{"localized_name":"debug_overlay","name":"debug_overlay","type":"IMAGE","links":[30]},{"localized_name":"disagreement_heatmap","name":"disagreement_heatmap","type":"IMAGE","links":[52]}],"properties":{"cnr_id":"comfyui-sharp","ver":"51939f0d3bdcd9f4965978445ad0fa31a6222ef0","Node name for S&R":"ProjectDepthToPanorama"},"widgets_values":[2048,"gaussian",true,"red",0.2]},{"id":6,"type":"SamplePanorama","pos":[-200.75380822431256,-934.3551031268805],"size":[388.2466796875,210],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"panorama","name":"panorama","type":"IMAGE","link":11},{"localized_name":"fov_degrees","name":"fov_degrees","type":"FLOAT","widget":{"name":"fov_degrees"},"link":null},{"localized_name":"overlap_percent","name":"overlap_percent","type":"FLOAT","widget":{"name":"overlap_percent"},"link":null},{"localized_name":"output_size","name":"output_size","type":"INT","widget":{"name":"output_size"},"link":null},{"localized_name":"skip_poles","name":"skip_poles","shape":7,"type":"BOOLEAN","widget":{"name":"skip_poles"},"link":null}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[12,14]},{"localized_name":"extrinsics","name":"extrinsics","type":"EXTRINSICS","links":[18]},{"localized_name":"intrinsics","name":"intrinsics","type":"INTRINSICS","links":[19]},{"localized_name":"num_horizontal","name":"num_horizontal","type":"INT","links":null},{"localized_name":"num_vertical","name":"num_vertical","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-sharp","ver":"51939f0d3bdcd9f4965978445ad0fa31a6222ef0","Node name for S&R":"SamplePanorama","aux_id":"PozzettiAndrea/ComfyUI-Sharp"},"widgets_values":[90,20,1536,true]},{"id":25,"type":"PreviewImage","pos":[837.7108350995264,-452.772224935793],"size":[636,398],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":52}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.12.2","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":8,"type":"PreviewImage","pos":[294.0726257921507,-862.2110152531175],"size":[456.7585111624088,246],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":12}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.12.2","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":13,"type":"PreviewImage","pos":[827.8445250599017,-891.9706860455786],"size":[636,398],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":30}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.12.2","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":12,"type":"PreviewImage","pos":[823.5595711961479,-1305.772046037818],"size":[548.9009283914478,321.74301470904584],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":29}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.12.2","Node name for S&R":"PreviewImage"},"widgets_values":[]}],"links":[[11,7,0,6,0,"IMAGE"],[12,6,0,8,0,"IMAGE"],[14,6,0,11,1,"IMAGE"],[18,6,1,11,2,"EXTRINSICS"],[19,6,2,11,3,"INTRINSICS"],[20,9,0,11,0,"SHARP_MODEL"],[25,11,0,16,0,"IMAGE"],[26,11,1,16,1,"EXTRINSICS"],[27,11,2,16,2,"INTRINSICS"],[29,16,0,12,0,"IMAGE"],[30,16,1,13,0,"IMAGE"],[37,19,0,20,0,"IMAGE"],[38,19,1,21,0,"IMAGE"],[46,11,0,24,0,"IMAGE"],[47,11,1,24,1,"EXTRINSICS"],[48,11,2,24,2,"INTRINSICS"],[49,24,0,19,0,"IMAGE"],[50,24,1,19,1,"EXTRINSICS"],[51,24,2,19,2,"INTRINSICS"],[52,16,2,25,0,"IMAGE"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.573085533011683,"offset":[733.1530148998932,1856.7715714261788]},"workflowRendererVersion":"LG","frontendVersion":"1.34.9"},"version":0.4}